@model IEnumerable<CookingSite.Models.Term>
@using Microsoft.AspNet.Identity;



@*This script sets the favoites(move)*@
<script>
    var userInput1 = " ";
    var aspId;

        function AssignButtonClicked(elem) {
            userInput1 = $(elem).data('assigned-id');
            aspId = "@HttpContext.Current.User.Identity.GetUserId()";


        };

    $(document).ready(function () {

        $('.SetFavBtn').click(function () {


                alert(userInput1)
                alert(aspId)
                var postFile = {
                    userInput1: userInput1,
                    aspId: aspId
                }
                var postFile1 = {
                    aspId: aspId
                }

                $.ajax({
                    type: 'POST',
                    url: "@Url.Action("SavFav")",
                    data: JSON.stringify(postFile),
                    contentType: "application/json; charset=utf-8",
                    success: function (data) { alert(data); },
                    error: function () {
                        alert("error saving input");
                    }
                });

            });
        });

</script>
@*This script hides the favorit button(move)*@
<script>
    var aspName = "@HttpContext.Current.User.Identity.GetUserName()";
    alert(aspName)

    $(function () {
        alert("in funct")
        if (aspName != "") {
            alert("in if")
            $('.SetFav').show()
        } else {
            $('.SetFav').hide()
        }
    });
</script>

<script>
   
    //$.get("/Term/MakeFalse", null, function () {
    //    alert("they false")
    //});
    var postFile = {
        userInput1: userInput1,
        aspId: aspId
    }
    $.ajax({
        type: 'POST',
        url: "@Url.Action("MakeFalse")",
        data: JSON.stringify(postFile),
        contentType: "application/json; charset=utf-8",  
    success: function (data) {},
    error: function () {
        
    }
    });
    
</script>

<div class="col-md-4" id="UploadedFile">

</div>

<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.TermName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.TermDef)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.TermInfo)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.TermPicture)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.TermVideo)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.IsMatch)
        </th>
        <th></th>
    </tr>

    @foreach (var item in Model)
    {
        if (item.IsMatch.Equals(true))
        {

            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.TermDef)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.TermInfo)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.TermVideo)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.TermPicture)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.TermName)
                </td>
                <td>
                    <div class="SetFav">
                        <input class="SetFavBtn" type="button" value="Assign" onclick="AssignButtonClicked(this)" data-assigned-id="@item.TermID" />
                    </div>

                </td>
                <td>

                    @Html.ActionLink("Details", "Details", new { id = item.TermID }) |

                </td>
            </tr>
        }
    }
</table>
